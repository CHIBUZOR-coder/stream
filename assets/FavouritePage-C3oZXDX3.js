import{v as w,r as l,M as y,j as e,f as M,J as C,L as $,N as F,O as P}from"./index-BFyDzDT0.js";const A=()=>{const{name:j}=w(),{Movies:g,setFavouriteCartMovies:p,FavouriteCartMovies:c,favCartAlert:E,setFavCartAlert:k}=l.useContext(y),v=async()=>{try{const t=await fetch(`http://localhost:5000/getfacouriteCart/${j}`,{method:"GET",headers:{"Content-Type":"application/json"}}),o=await t.json();if(!t.ok){console.log("Error fetching cart:",o);return}console.log("cartData:",o.data.favouriteCartMovies),localStorage.setItem("Favourite",JSON.stringify(o.data.favouriteCartMovies)),p(o.data.favouriteCartMovies)}catch(t){console.log("Fetch error:",t.message)}};l.useEffect(()=>{v()},[]);const[s,d]=l.useState(1),i=10,f=l.useMemo(()=>(c||[]).slice((s-1)*i,s*i),[c,s]),n=Math.ceil(g.length/i),a="text-xs text-left text-main font-semibold px-6 py-2 uppercase ",r="text-sm text-left leading-6 whitespace-nowrap px-5 py-3 ";return e.jsx(M,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex justify-between items-center p-0 md:p-4",children:e.jsx("h2",{className:"md:text-xl text-lg text-white font-bold",children:"Favourite Movies"})}),e.jsx("div",{className:"overflow-x-scroll overflow-hidden relative w-full",children:e.jsxs("table",{className:"table-auto w-full text-white border  border-border divide-y divide-border",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-dryGray",children:[e.jsx("th",{scope:"col",className:`${a}`,children:"Image"}),e.jsx("th",{scope:"col",className:`${a}`,children:"Name"}),e.jsx("th",{scope:"col",className:`${a}`,children:"Category"}),e.jsx("th",{scope:"col",className:`${a}`,children:"Year"}),e.jsx("th",{scope:"col",className:`${a}`,children:"Hours"}),e.jsx("th",{scope:"col",className:`${a}`,children:"Actions"})]})}),e.jsx("tbody",{className:" bg-main divide-y divide-gray-800",children:f.map((t,o)=>{var x,h,m,u,b;return e.jsxs("tr",{children:[e.jsx("td",{className:`${r}`,children:e.jsx("div",{className:"w-12 bg-dry borer border-border rounded h-12 overflow-hidden ",children:e.jsx("img",{src:`${(x=t.movie)==null?void 0:x.image}`,alt:t.name,className:"w-full h-full object-cover rounded-md"})})}),e.jsx("td",{className:`${r}`,children:e.jsx("p",{children:(h=t.movie)==null?void 0:h.name})}),e.jsx("td",{className:`${r}`,children:e.jsx("p",{children:(m=t.movie)==null?void 0:m.category.tittle})}),e.jsx("td",{className:`${r}`,children:e.jsx("p",{children:(u=t.movie)==null?void 0:u.year})}),e.jsx("td",{className:`${r} `,children:e.jsx("p",{children:(b=t.movie)==null?void 0:b.time})}),e.jsxs("td",{className:`${r}  gap-3 flex items-center `,children:[e.jsxs("button",{className:"bg-dry border border-border flexRow gap-2 text-border px-2 py-1 rounded",children:["Download ",e.jsx(C,{})]}),e.jsx($,{to:`/stream/watch/${t.id}`,className:"bg-subMain text-white  hover:bg-main transi border border-subMain rounded flexCol w-6 h-6 ",children:e.jsx(F,{})}),e.jsx("button",{onClick:N=>{HandleDeleteMovie(N,t.id)},className:"bg-subMain text-white rounded flexCol w-6 h-6  hover:bg-main transi border border-subMain delete  ",children:e.jsx(P,{className:"deletechild transi"})})]})]},o)})})]})}),e.jsxs("div",{className:"flex justify-center gap-2 mb-7 mt-2",children:[e.jsx("button",{disabled:s===1,onClick:()=>d(t=>t-1),className:`px-4 py-2 rounded ${s===1?"bg-gray-400 text-white":"bg-subMain text-white"}`,children:"Previous"}),e.jsx("button",{disabled:s===n,onClick:()=>d(t=>t+1),className:`px-4 py-2 rounded ${s===n?"bg-gray-400 text-white":"bg-subMain text-white"}`,children:"Next"})]})]})})};export{A as default};
