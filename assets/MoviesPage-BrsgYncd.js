import{R as w,r as a,M,j as e,l as E,m as N,g as D,L as F,F as T}from"./index-B3Ixr6GT.js";const H=w.memo(({Movies:h})=>{const{setSelectedItems:m,selectedItems:c,RatesData:o,TimesData:p,YearData:i,HandleGetSelected:j,categoryDataa:l,userChoice:y}=a.useContext(M),[g,n]=a.useState(null),[b,t]=a.useState(!1),[d,x]=a.useState(null),[u,C]=a.useState([]);a.useEffect(()=>{l?(x(l[0].name),C(l)):x(e.jsx("p",{children:"No data list "}))},[l]);const S=[{id:1,items:u},{id:2,items:i},{id:3,items:p},{id:4,items:o}],k=s=>{g===s?(n(null),t(!1)):(n(s),t(!0))},$=(s,f)=>{console.log(f),m(r=>({...r,[s]:f})),j(s,f)};return e.jsx("div",{className:"my-6 bg-dry border text-dryGray border-gray-800 grid md:grid-cols-4 grid-cols-2 lg:gap-12 gap-2 rounded p-6",children:S.map(s=>{var f;return e.jsxs("div",{onClick:()=>k(s.id),children:[e.jsxs("div",{className:"relative w-full flex items-center cursor-pointer border-gray-800 text-white px-4 py-2 text-left bg-main rounded-lg focus:outline-none focus:ring-1 focus:border-dry",children:[e.jsx("span",{className:"block font-semibold text-[0.7rem] filterr md:text-[1rem] ",children:c[s.id]?(f=s.items.find(r=>r.id===c[s.id]))==null?void 0:f.tittle:e.jsx(e.Fragment,{children:s.id===1?e.jsx("p",{children:"Sort By Category"}):s.id===2?e.jsx("p",{children:"Sort By Year"}):s.id===3?e.jsx("p",{children:"Sort By Hours"}):s.id===4?e.jsx("p",{children:"Sort By Rates"}):""})}),e.jsx("span",{className:"absolute right-2 flex items-center",children:e.jsx(E,{className:"h-5 w-5","aria-hidden":"true"})})]}),e.jsx("div",{className:`${g===s.id?`${b?"block":"hidden"}`:"hidden"} relative`,children:e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-drkb2 flex flex-col gap-2 pl-4 border border-gray-800 text-dryGray rounded-md shadow-lg max-h-60 py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm-text-sm",children:s.items.map((r,v)=>e.jsxs("div",{onClick:()=>{$(s.id,r.id),console.log(r.id)},className:`${r.id===0?"hidden":""}   relative w-full flex justify-start items-center gap-2 hover:bg-white hover:text-dry transi py-1 cursor-pointer ${c[s.id]===r.id?"font-bold":""}`,children:[e.jsx("span",{children:c[s.id]===1?c[s.id]===r.id&&v>=0&&e.jsx(N,{className:"h-4 w-4"}):c[s.id]===r.id&&v!==0&&e.jsx(N,{className:"h-4 w-4"})}),e.jsx("span",{className:"truncate font-semibold ",children:r.tittle})]},v))})})]},s.id)})})}),A=()=>{const{userChoice:h,FetchedMovies:m,AddToCart:c}=a.useContext(M),[o,p]=a.useState([]);a.useEffect(()=>{m&&p(m)},[m]),a.useEffect(()=>{console.log("mov:",o)},[o]);const i=10,j=39,[l,y]=a.useState(0),g=()=>!h||Object.keys(h).length===0?o:o.filter(t=>{let d=!0;for(const[x,u]of Object.entries(h))(x==="1"&&t.category.tittle!==u||x==="2"&&t.approxiY!==u||x==="3"&&t.approxiT!==u||x==="4"&&t.approxiR!==u)&&(d=!1);return d}),n=g(),b=t=>{t==="next"?l+i<n.length&&(y(l+i),window.scrollTo({top:0,behavior:"smooth"})):t==="prev"?l-i>=0&&(y(l-i),window.scrollTo({top:0,behavior:"smooth"})):console.log("error")};return a.useEffect(()=>{console.log("page",l)},[l]),a.useEffect(()=>{console.log("filtered",n.length)},[g]),a.useEffect(()=>{console.log("max",i)},[i]),e.jsx(D,{children:e.jsxs("div",{className:"px-2 my-6",children:[e.jsx(H,{Movies:o}),e.jsxs("p",{className:"text-lg font-medium flex items-center gap-2 my-6",children:["Total items found",e.jsxs("span",{className:"font-bold text-subMain rounded-lg",children:[" ",n.length]})]}),e.jsx("div",{id:"#top",className:"grid sm:mt-10 mt-6 xl:grid-cols-4 2xl:grid-cols-5 lg:grid-cols-3 sm:grid-cols-1 gap-6",children:n.slice(l,l+i).map((t,d)=>e.jsxs("div",{className:"border-2 border-border rounded bg-center bg-cover relative transi hover:scale-95 w-full flex flex-col ",children:[e.jsx(F,{to:`/stream/movie/${t.id}`,className:" h-64  bg-center bg-cover ",children:e.jsx("img",{src:`${t.image}`,loading:"lazy",className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:"flex absolute bottom-0  justify-between items-center  bg-trans2 w-full text-white px-4 py-3",children:[e.jsx("h3",{className:"font-semibold truncate",children:t.name}),e.jsx("button",{onClick:()=>c(t,t.price),className:"h-8 w-8 text-sm flexCol transi hover:bg-transparent border-subMain bg-subMain2 border-2 rounded-md text-white ",children:e.jsx(T,{})})]})]},`${t.id}`))}),e.jsxs("div",{className:" my-10 md:my-16 flex justify-center gap-5 items-center w-full",children:[e.jsx("span",{onClick:t=>b("prev"),className:` ${l>0?"bg-subMain":""} border-2 flex justify-center items-center gap-2 rounded-md cursor-pointer border-subMain py-3 px-8`,children:"prev"}),e.jsx("span",{onClick:t=>b("next"),className:` ${l<j?"bg-subMain":""} border-2 flex justify-center items-center gap-2 rounded-md cursor-pointer border-subMain py-3 px-8`,children:"next"})]})]})})};export{A as default};
