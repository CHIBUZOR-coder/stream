import{r as t,M as E,j as e,T as fe,J as B,L as Ue,I as Ee,H as he,P as xe,K as Pe,v as Ve}from"./index-CQ6vIMK1.js";import{I as c}from"./Input-DtDeIXiT.js";import{U as _}from"./Uploader-Df_6YuIp.js";import{C as Le,L as Re}from"./Layout-DU7DEsnU.js";import{T as ke,U as Oe}from"./Users-CWFlC8FT.js";import{S as ze}from"./SelectRating-BXpnODhF.js";import"./index-XDmFzpxP.js";const He=()=>{const{HandleActiveChange:a,isActive:p,slideLinks:r,User:v}=t.useContext(E),m=r.filter(d=>d.user==="All");return e.jsx("div",{className:"sidebar  mx-auto  bg",children:e.jsx("div",{className:"relative  ",children:e.jsx("div",{className:"flexCol justify-start  w-full items-start md:py-6 py-12 sticky top-0 bg-dry border border-gray-800 rounded-md px-4 ",children:v.role==="Admin"?e.jsx(e.Fragment,{children:r.map((d,o)=>e.jsxs("div",{onClick:j=>a(d.name,j),className:` ${p===d.name?"bg-dryGray text-subMain hover:text-subMain hover:bg-dryGray":"text-white"}  flex justify-start items-center w-full p-3 gap-4  hover:bg-main rounded-md  transi cursor-pointer`,children:[d.icon,e.jsx("p",{children:d.name})]},o))}):e.jsx(e.Fragment,{children:m.map((d,o)=>e.jsxs("div",{onClick:j=>a(d.name,j),className:` ${p===d.name?"bg-dryGray text-subMain hover:text-subMain hover:bg-dryGray":"text-white"}  flex justify-start items-center w-full p-3 gap-4  hover:bg-main rounded-md  transi cursor-pointer`,children:[d.icon,e.jsx("p",{children:d.name})]},o))})})})})},$e=()=>{const{setInputVal:a,handleFileUploaded:p}=t.useContext(E),[r,v]=t.useState([]),[m,d]=t.useState(""),[o,j]=t.useState(""),[f,w]=t.useState("");return e.jsx("div",{className:" w-full rounded-md ",children:e.jsxs("div",{className:" p-4 flex flex-col gap-6 text-white bg-dry border border-gray-800 rounded-md",children:[e.jsx("p",{className:"text-xl font-bold",children:"Profile"}),e.jsx(_,{onFileUploaded:p,prviewSetter:v,MainImageSetter:d,For:"image"}),e.jsx("div",{className:" w-full  relative col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 items-center ",children:e.jsx("div",{className:"flex gap-4 flex-wrap",children:m.length>0?m.map((N,C)=>e.jsx("div",{className:"w-32 h-32 p-2 bg-main border border-border rounded flex items-center justify-center",children:e.jsx("img",{src:r,alt:`Uploaded Preview ${r}`,className:"object-cover w-full h-full rounded"})},C)):e.jsx("p",{className:"text-sm text-gray-500 p-4 rounded-md border border-border bg-main",children:"No images selected"})})}),e.jsx(c,{label:"Full Name",placeholder:"John Doe",type:"text",setter:j,setInputVal:a,mainVal:o}),e.jsx(c,{label:"Email",placeholder:"Streamview@gmail.com",type:"email",setter:w,setInputVal:a,mainVal:f}),e.jsxs("div",{className:"flex gap-2 flex-wrap flex-col-reverse sm:flex-row justify-between items-center",children:[e.jsx("button",{className:"bg-subMain font-medium transi hover:bg-main  gap-4 text-white border border-subMain py-3 px-6 rounded-lg w-full sm:w-auto ",children:"Delete Account"}),e.jsx("button",{className:"bg-main font-medium transi hover:bg-subMain  gap-4 text-white border border-subMain py-3 px-6 rounded-lg w-full sm:w-auto ",children:"Update Profile"})]})]})})},Ye=()=>{const{setInputVal:a}=t.useContext(E),[p,r]=t.useState(""),[v,m]=t.useState(""),[d,o]=t.useState("");return e.jsxs("div",{className:" p-4 flex flex-col gap-6 text-white bg-dry ",children:[e.jsx("p",{className:"text-xl font-bold",children:"Change Password"}),e.jsx(c,{label:"Previous Password",placeholder:"******",type:"password",setInputVal:a,setter:r,mainVal:p}),e.jsx(c,{label:"New Password",placeholder:"******",type:"password",setInputVal:a,setter:m,mainVal:v}),e.jsx(c,{label:"Confirm Password",placeholder:"******",type:"password",setInputVal:a,setter:o,mainVal:d}),e.jsx("div",{className:"flex gap-2 flex-wrap flex-col-reverse sm:flex-row justify-start items-center",children:e.jsx("button",{className:"bg-main font-medium transi hover:bg-subMain  gap-4 text-white border border-subMain py-3 px-6 rounded-lg w-full sm:w-auto ",children:"Change Password"})})]})},Be=()=>{const{Movies:a,User:p}=t.useContext(E),r=a.slice(0,10);return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-0 md:p-4 ",children:[e.jsx("h2",{className:"md:text-xl text-lg text-white  font-bold",children:"Favourite Movies"}),e.jsx("button",{className:"bg-dry font-medium transi hover:bg-subMain  gap-4 text-white border border-subMain py-3 px-6 rounded ",children:"Delete All"})]}),e.jsx(fe,{data:r,User:p,For:"Fav"})]})},Je=({Handlegeneral:a,HandleDeleteMovie:p,setResult:r,setIsLoading:v,setLoadDiaplay:m})=>{const{Movies:d,User:o,AllMovies:j,Alert:f}=t.useContext(E),[w,N]=t.useState(null),[C,M]=t.useState(null);t.useEffect(()=>{if(j&&j.length>0){const D=j.slice(0,10);M(D)}},[j]);const x=async()=>{if(window.confirm("Are you sure you want to delete this item?")){m("Deleting Movies..."),v(!0);try{const S=await fetch("http://localhost:5000/api/deletAllMovie",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer your-auth-token"}});let A;S.ok||(A=await S.json(),v(!1),r(f(!1,A.message))),A=S.json(),v(!1),r(f(!0,"Movies Deleted successfully"))}catch(S){console.error(S.message),r(f(!1,"Somthing went wrong, please try again later"))}finally{setTimeout(()=>{r(null)},6e3)}}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-0 md:p-4 ",children:[e.jsx("h2",{className:"md:text-xl text-lg text-white  font-bold",children:"Movie Lists"}),e.jsx("button",{onClick:()=>{x()},className:"bg-dry font-medium transi hover:bg-subMain  gap-4 text-white border border-subMain py-3 px-6 rounded ",children:"Delete All"})]}),e.jsx(fe,{data:C,User:o,For:"movie",dataId:w,Handlegeneral:a,HandleDeleteMovie:p})]})},Ge=({IdRetrival:a,setter:p})=>{const{setModalDisplay:r,currentModal:v,setCurrentModal:m,categoryData:d}=t.useContext(E),[o,j]=t.useState([]);console.log("ddd:",d);const f=async(N,C)=>{N.preventDefault();try{const x=await(await fetch("http://localhost:5000/api/deleteCategory",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer your-auth-token"},body:JSON.stringify({id:C})})).json();console.log(x)}catch(M){console.log(M.message)}},w=[{id:1,title:"Id"},{id:2,title:"Date"},{id:3,title:"Tittle"},{id:3,title:"Actions"}];return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex justify-between items-center p-0 md:p-4 ",children:[e.jsx("h2",{className:"md:text-xl text-lg text-white  font-bold",children:"Categories"}),e.jsxs("button",{onClick:()=>{r(N=>!N),m("Add"),console.log(v)},className:"bg-main font-medium flexRow transi hover:bg-main  gap-4 text-text hover:text-green-500 border border-subMain hover:border-green-500 py-2 px-4 rounded ",children:[e.jsx(B,{})," Create"]})]}),e.jsx(ke,{data:o,headList:w,For:"category",HandeleDelete:f,IdRetrival:a,setter:p,setCurrentModal:m})]})},qe=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flexCol w-full h-[100vh] text-white bg-main bg-center",children:[e.jsx("img",{className:"w-full h-full object-cover",src:"https://res.cloudinary.com/dtjgj2odu/image/upload/v1735808522/errorPage3_mc0z9z.jpg",alt:"Not Found"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col gap-8 bg-transb items-center justify-center md:py-20 py-10",children:[e.jsxs("div",{className:"w-full flexCol gap-3",children:[e.jsx("h1",{className:"text-4xl font-bold",children:"ðŸ¤–Opps!"}),e.jsx("h1",{className:"text-4xl font-bold",children:"Not a User"})]}),e.jsx("p",{className:" px-44 text-center text-lg text-text italic",children:"You have to be a user to gain acces to your own dashboard at this address or page. Navigate to the Signup page below and signup to gain acces to your Dashboard"}),e.jsxs(Ue,{to:"/stream/register",className:"bg-subMain text-white flexRow gap-3 font-medium py-2 px-4 rounded-md hover:bg-dry transi hover:text-gray-500",children:[e.jsx(Ee,{})," Signup"]})]})]})});function ge(a){return he({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:"currentColor"},child:[]}]})(a)}function Ze(a){return he({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 2l.642 .005l.616 .017l.299 .013l.579 .034l.553 .046c4.687 .455 6.65 2.333 7.166 6.906l.03 .29l.046 .553l.041 .727l.006 .15l.017 .617l.005 .642l-.005 .642l-.017 .616l-.013 .299l-.034 .579l-.046 .553c-.455 4.687 -2.333 6.65 -6.906 7.166l-.29 .03l-.553 .046l-.727 .041l-.15 .006l-.617 .017l-.642 .005l-.642 -.005l-.616 -.017l-.299 -.013l-.579 -.034l-.553 -.046c-4.687 -.455 -6.65 -2.333 -7.166 -6.906l-.03 -.29l-.046 -.553l-.041 -.727l-.006 -.15l-.017 -.617l-.004 -.318v-.648l.004 -.318l.017 -.616l.013 -.299l.034 -.579l.046 -.553c.455 -4.687 2.333 -6.65 6.906 -7.166l.29 -.03l.553 -.046l.727 -.041l.15 -.006l.617 -.017c.21 -.003 .424 -.005 .642 -.005zm0 9h-1l-.117 .007a1 1 0 0 0 0 1.986l.117 .007v3l.007 .117a1 1 0 0 0 .876 .876l.117 .007h1l.117 -.007a1 1 0 0 0 .876 -.876l.007 -.117l-.007 -.117a1 1 0 0 0 -.764 -.857l-.112 -.02l-.117 -.006v-3l-.007 -.117a1 1 0 0 0 -.876 -.876l-.117 -.007zm.01 -3l-.127 .007a1 1 0 0 0 0 1.986l.117 .007l.127 -.007a1 1 0 0 0 0 -1.986l-.117 -.007z"},child:[]}]})(a)}const Ke=({setIsLoading:a,setResult:p,setLoadDiaplay:r})=>{const{CategoryData:v,handleFileUploaded:m,handleFileUploadedVideo:d,setInputVal:o,Movies:j,categoryData:f,CategoryId:w,Alert:N,AllMovies:C}=t.useContext(E),[M,x]=t.useState(!1),[D,S]=t.useState([]);t.useEffect(()=>{f&&S(f)},[f]),t.useEffect(()=>{console.log("categryId",w)},[w]);let A="video";const[P,O]=t.useState([]),[re,Q]=t.useState(null),[V,W]=t.useState(null),[z,X]=t.useState(null),[F,ee]=t.useState([]),[J,G]=t.useState(""),[H,te]=t.useState(""),[L,g]=t.useState(""),[y,se]=t.useState([]),[I,u]=t.useState(""),[$,U]=t.useState(null),[R,ae]=t.useState(""),[q,le]=t.useState(""),[s,i]=t.useState(""),[T,Y]=t.useState(""),[k,be]=t.useState([]),[oe,ve]=t.useState(""),[ie,je]=t.useState(""),[Z,we]=t.useState(""),[ne,de]=t.useState(),[ce,ye]=t.useState(""),[me,Ne]=t.useState(""),[ue,Me]=t.useState(""),[pe,Ce]=t.useState(""),[Se,Fe]=t.useState(null),[_e,Ie]=t.useState(null);t.useState({name:"",time:"",approxiT:"",popular:"",categoryId:"",year:"",approxiY:"",rating:"",approxiR:"",language:"",description:"",price:"",trailer:"",image:"",video:""}),t.useEffect(()=>{if(k.name&&y.name){const l=k.name.slice(0,-7);console.log("Mov (sliced):",l);const b=y.name.slice(0,-7);console.log("Img (sliced):",b),x(l===b)}},[k,y]),t.useEffect(()=>{de(Z==="true")},[Z]),t.useEffect(()=>{console.log("Apop",ne)},[ne]),t.useEffect(()=>{console.log("initial",M)},[M]),t.useEffect(()=>{console.log("MovieImages",y)},[y]),t.useEffect(()=>{console.log("Images",P)},[P]);const De=async n=>{n.preventDefault(),a(!0),r("Creating Movies...");const l=new FormData;l.append("name",R),l.append("time",q),l.append("approxiT",oe),l.append("popular",Z),l.append("year",T),l.append("approxiY",ie),l.append("rating",ce),l.append("approxiR",me),l.append("language",s),l.append("description",H),l.append("price",ue),l.append("trailer",pe),l.append("categoryId",Se),l.append("image",y),l.append("video",k);try{const h=await fetch("http://localhost:5000/api/createMovies",{method:"POST",headers:{Authorization:"Bearer your-auth-token"},body:l});let b;if(h.ok)b=await h.json(),console.log(b),a(!1),p(N(!0,"Movie successfully created!"));else throw b=await h.json(),console.error("Error response:",b.message),a(!1),p(N(!1,b.message)),new Error(b.message||"An error occurred")}catch(h){console.log(h.message)}finally{setTimeout(()=>{p(null)},3e3)}},Ae=async n=>{n.preventDefault();const l=new FormData;l.append("movieId",$),l.append("casts",JSON.stringify(F)),F.forEach((h,b)=>{l.append(`casts[${b}][imageurl]`,h.imageurl)});try{const h=await fetch("http://localhost:5000/api/addCast",{method:"POST",body:l}),b=await h.json();if(!h.ok){console.error("Error:",b.message);return}console.log("Casts added successfully:",b)}catch(h){console.error("Error submitting form:",h)}};t.useEffect(()=>{Fe(w)},[w]),t.useEffect(()=>{console.log("descrip",H)},[H]),t.useEffect(()=>{console.log("cast",F)},[F]);const Te=(n,l,h)=>{if(!n||!l||!h){console.error("All fields (name, role, imageurl) are required.");return}if(typeof n!="string"||typeof l!="string"){console.error("All fields must be strings.");return}if(F.some(K=>K.name===n&&K.role===l)){console.warn("This cast already exists.");return}const b={name:n,role:l,imageurl:h};ee(K=>[...K,b]),G(""),g(""),O([])};return t.useEffect(()=>{if(I){const n=C.find(l=>l.name===I);console.log("IdVal",n),n&&U(n.id)}},[I]),t.useEffect(()=>{console.log("movieName",I)},[I]),t.useEffect(()=>{console.log("movieId",$)},[$]),e.jsxs("div",{className:"flex flex-col gap-28",children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("h2",{className:"text-2xl font-bold ",children:"Add Movie"}),e.jsxs("form",{onSubmit:n=>{De(n)},className:"flex flex-col gap-6 text-left",action:"",children:[e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Movie Title",placeholder:"Avengers",type:"text",bg:!0,setter:ae,setInputVal:o,mainVal:R,indicator:"Movie Title",labelFor:"name"}),e.jsx(c,{label:"Time",placeholder:"2hr 20min",type:"text",bg:!0,setter:le,setInputVal:o,mainVal:q,indicator:"Time",labelFor:"time"})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Duration",placeholder:"2 - 3 hrs",type:"text",bg:!0,setter:ve,setInputVal:o,mainVal:oe,indicator:"Duration",labelFor:"approxiT"}),e.jsx(c,{label:"Popular Movie?",placeholder:"true/false",type:"text",bg:!0,setter:we,setInputVal:o,mainVal:Z,indicator:"Popular Movies",labelFor:"popular"})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Year Released",placeholder:"2022",type:"number",bg:!0,setter:Y,setInputVal:o,mainVal:T,indicator:"Year Released",labelFor:"year"}),e.jsx(c,{label:"Year Duration",placeholder:"2010 - 2030",type:"text",bg:!0,setter:je,setInputVal:o,mainVal:ie,indicator:"Year Duration",labelFor:"approxiY"})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Rating",placeholder:"maximum range is 5",type:"number",bg:!0,setter:ye,setInputVal:o,mainVal:ce,indicator:"Rating",labelFor:"rating"}),e.jsx(c,{label:"Rating range",placeholder:"4 Star",type:"text",bg:!0,setter:Ne,setInputVal:o,mainVal:me,indicator:"Rating range",labelFor:"approxiR"})]}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Language Used",placeholder:"English",type:"text",bg:!0,setter:i,setInputVal:o,mainVal:s,indicator:"Language",labelFor:"language"}),e.jsx(c,{label:"Price",placeholder:"Add price",type:"number",bg:!0,setter:Me,setInputVal:o,mainVal:ue,indicator:"price",labelFor:"price"})]}),e.jsx("div",{className:"w-full grid md:grid-cols-2 gap-6",children:e.jsx(c,{label:"Trailer",placeholder:"https://www.youtube.com/embed/6ZfuNTqbHE8",type:"text",bg:!0,setter:Ce,setInputVal:o,mainVal:pe,indicator:"Trailer",labelFor:"trailer"})}),e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6 ",children:[e.jsxs("div",{className:"flex flex-col gap-2 w-full col-span-2 md:col-span-1 ",children:[e.jsx("p",{className:"text-border font-semibold text-sm ",children:"Movie Image"}),e.jsx(_,{MainImageSetter:se,onFileUploaded:m,prviewSetter:W,For:"image"}),e.jsx("div",{className:" w-full  relative col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 items-center cursor-default ",children:e.jsx("div",{className:"flex gap-4 flex-wrap",children:y.name?e.jsx("div",{className:"w-32 h-32 p-2 bg-main border border-border rounded flex items-center justify-center",children:e.jsx("img",{src:V,alt:`Uploaded Preview ${y.name}`,className:"object-cover w-full h-full rounded"})}):e.jsx("p",{className:"text-sm text-gray-500 p-4 rounded-md border border-border bg-main",children:"No images selected"})})})]}),e.jsxs("div",{className:"flex flex-col  gap-2 w-full col-span-2 md:col-span-1 ",children:[e.jsx("p",{className:"text-border font-semibold text-sm ",children:"Movie Video"}),y?e.jsx(_,{onFileUploaded:d,prviewSetter:Q,MainVideoSetter:be,For:A}):e.jsx("div",{className:"w-full col-span-2 md:col-span-1 flex flex-col justify-center items-center bg-main border-border border-2 py-4 md:py-0 h-auto md:h-[207.5px] border-dashed rounded-md",children:e.jsxs("div",{className:" animate-pulse",children:[e.jsx("p",{className:"w-full p-8  text-lg text-text  text-center",children:"This Feild will only be active after adding Movie Image"}),e.jsx("span",{className:" flex justify-center items-center mt-0 md:-mt-2  rounded-full ",children:e.jsx(Ze,{className:"w-10 h-10"})})]})}),e.jsx("div",{className:" w-full  relative col-span-2  flex justify-center items-center cursor-default ",children:e.jsx("div",{className:"flex gap-4 flex-wrap w-full",children:k.name?M?e.jsxs("div",{className:" w-full p-2 bg-main border border-border rounded flex flex-col gap-2 items-center justify-center",children:[k.name,e.jsx("div",{className:"w-32 h-32 p-2 bg-main border border-border rounded flex items-center justify-center",children:e.jsx("img",{src:V,alt:`Uploaded Preview ${y.name}`,className:"object-cover w-full h-full rounded"})})]}):e.jsx("p",{className:"text-sm text-gray-500 p-4 rounded-md border border-border bg-main",children:"The movies you added may not be currect. Please Check"}):e.jsx("p",{className:"text-sm text-gray-500 p-4 rounded-md border border-border bg-main",children:"No video selected"})})})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"w-full  relative col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6 items-start ",children:[e.jsxs("div",{className:"w-full col-span-2 md:col-span-1",children:[e.jsx("label",{className:"text-border font-semibold",children:"Movie Description"}),e.jsx("textarea",{onChange:n=>te(n.target.value),className:"w-full h-44 mt-2 p-6 bg-main border border-border rounded",placeholder:"Make it short and honest....",name:"",id:""})]}),e.jsxs("div",{className:"w-full relative text-sm mt-6",children:[e.jsx(ze,{data:D,setter:Ie}),e.jsx("div",{className:"absolute top-[47%] cursor-pointer right-4 flex items-center  transform pointer-events-auto",children:e.jsx(Le,{className:"text-white h-4 w-4 "})})]})]})}),e.jsxs("button",{className:"md:w-1/2 w-full  font-semibold flexRow py-3 rounded border-2 gap-3 Oga cursor-pointer transi border-subMain bg-subMain text-white hover:bg-main",children:[e.jsx(B,{className:"pikin h-7 w-7"})," Add"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("h2",{className:"text-2xl font-bold ",children:"Add Casts"}),e.jsxs("form",{className:"flex flex-col gap-8 text-left",action:"",children:[e.jsxs("div",{className:"w-full grid md:grid-cols-2 gap-6",children:[e.jsx(c,{label:"Full Name",placeholder:"Name",type:"text",bg:!0,setter:G,setInputVal:o,mainVal:J,indicator:"Full Name",labelFor:"name"}),e.jsx(c,{label:"Role",placeholder:"Movie role",type:"text",bg:!0,setter:g,setInputVal:o,mainVal:L,indicator:"Role",labelFor:"role"})]}),e.jsx("div",{className:"w-full  flex justify-center items-center",children:e.jsx(c,{label:"Movie Name",placeholder:"SpiderMan",type:"text",bg:!0,setter:u,setInputVal:o,mainVal:I,indicator:"Full Name",labelFor:"name",center:"center"})}),e.jsx("div",{className:"w-full grid md:grid-cols-1 gap-6 ",children:e.jsxs("div",{className:"flex flex-col gap-2 w-full col-span-2 md:col-span-1 ",children:[e.jsx("p",{className:"text-border font-semibold text-sm ",children:"Movie Images"}),e.jsx(_,{onFileUploaded:m,For:"imageurl",For2:"cast",prviewSetter:X,MainImageSetter:O})]})}),e.jsxs("div",{className:" w-full  relative col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6 items-start cursor-default ",children:[e.jsx("div",{className:"flex gap-4 flex-wrap",children:P.path?e.jsx("div",{className:"w-32 h-32 p-2 bg-main border border-border rounded flex items-center justify-center",children:e.jsx("img",{src:z,alt:`Uploaded Preview ${P.name}`,className:"object-cover w-full h-full rounded"})}):e.jsx("p",{className:"text-sm text-gray-500 p-4 rounded-md border border-border bg-main",children:"No images selected"})}),e.jsx("div",{className:"bg-main w-full border-2 border-border col-span-2 border-dashed rounded-md p-2 ",children:F.length>0?e.jsx("div",{className:` ${F.length>0?"grid   grid-cols-2  md:grid-cols-3  gap-3 items-center p-2":" flex justify-start items-center"} w-full `,children:F.map((n,l)=>e.jsxs("div",{className:"flex flex-col gap-3 items-center justify-center",children:[e.jsx("div",{className:" p-2 bg-main border border-border rounded ",children:e.jsx("img",{src:n.imageurl?URL.createObjectURL(n.imageurl):"",alt:`${n.name}'s Image`,className:"w-28 h-28 object-cover rounded"})}),e.jsx("p",{className:"text-sm font-semibold",children:n.name})]},l))}):e.jsx("div",{className:"w-full flex justify-center items-center  ",children:e.jsx("p",{className:"text-text w-full text-center",children:"No cast added"})})})]}),e.jsxs("div",{className:"w-full flex justify-center gap-6",children:[e.jsxs("button",{onClick:n=>{Ae(n)},className:"md:w-1/2 w-full  font-semibold flexRow py-3 rounded border-2 gap-3 Oga cursor-pointer transi border-subMain bg-subMain text-white hover:bg-main",children:[e.jsx(B,{className:"pikin h-7 w-7"})," Add"]}),e.jsxs("span",{onClick:n=>{n.preventDefault(),Te(J,L,P)},className:"md:w-1/2 w-full  font-semibold flexRow py-3  rounded border-2 gap-2 Ogaa cursor-pointer transi  border-subMain bg-main text-white hover:bg-subMain",children:[e.jsx(B,{className:"pikin h-7 w-7"})," Add Cast"]})]})]})]})]})},lt=()=>{const{isActive:a,display:p,setDisplay:r,User:v,currentModal:m,setCurrentModal:d,ModalDisplay:o,ModalChangeUpdate:j,setModalDisplay:f,UpdatedTite:w,setInputVal:N,IdRetrival:C,AllMovies:M,Alert:x}=t.useContext(E),[D,S]=t.useState(null),[A,P]=t.useState(""),[O,re]=t.useState(null);t.useEffect(()=>{if(M){console.log("from dash",M);const s=M.find(i=>i.id===D);console.log("update:",s),s&&s.id===D&&re(D)}},[D]);const Q=(s,i)=>{d("TableEdit"),console.log("Table"),j(s),C(i,S)},[V,W]=t.useState(""),[z,X]=t.useState(""),[F,ee]=t.useState({tittle:"",id:null}),[J,G]=t.useState({name:"",movieId:null}),[H,te]=t.useState({tittle:""}),[L,g]=t.useState(!1),[y,se]=t.useState(null),[I,u]=t.useState(),[$,U]=t.useState("");t.useEffect(()=>{te({tittle:V}),ee(s=>({...s,tittle:z,id:y}))},[V,z,y]),t.useEffect(()=>{G(s=>({...s,name:A,movieId:O}))},[O,A]);const R=async()=>{U("Updating Movie..."),g(!0);try{let s;const i=await fetch("http://localhost:5000/api/updateMovie",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer your-auth-token"},body:JSON.stringify(J)});i.ok||(s=await i.json(),g(!1),u(x(!1,s.message))),s=await i.json(),console.log(s),g(!1),u(x(!0,"Movie updated succesfully"))}catch(s){console.error(s.message),u(x(!1,"Somthing went wrong"))}finally{setTimeout(()=>{u(null)},6e3)}},ae=async(s,i)=>{s.preventDefault(),U("Deleting Movie..."),g(!0);try{let T;const Y=await fetch("http://localhost:5000/api/deletSingleMovie",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer your-auth-token"},body:JSON.stringify({id:i})});Y.ok||(T=await Y.json(),g(!1),u(x(!1,T.message))),T=await Y.json(),console.log(T),g(!1),u(x(!0,"Movie deleted succesfully"))}catch(T){console.error(T.message),u(x(!1,"Somthing went wrong"))}finally{setTimeout(()=>{u(null)},6e3)}},q=async()=>{U("Adding Category..."),g(!0);try{const s=await fetch("http://localhost:5000/api/createCartegory",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer your-auth-token"},body:JSON.stringify(H)});let i;s||(g(!1),i=await s.json(),u(x(!1,i.message))),i=await s.json(),g(!1),u(x(!0,"Category added successfully")),console.log(i)}catch(s){console.log(s.message)}finally{setTimeout(()=>{u(null)},6e3)}},le=async()=>{U("Updating Category..."),g(!0);try{const s=await fetch("http://localhost:5000/api/updateCategory",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer your-auth-token"},body:JSON.stringify(F)});let i;s.ok||(i=await s.json(),g(!1),u(x(!1,i.message))),g(!1),u(x(!0,"Category updated succesfully")),i=await s.json(),console.log(i)}catch(s){console.log(s.message)}finally{setTimeout(()=>{u(null)},6e3)}};return t.useEffect(()=>{r(a==="Update Profile"?e.jsx($e,{}):a==="Favourite Movies"?e.jsx(Be,{}):a==="Change Password"?e.jsx(Ye,{}):a==="Notifications"?e.jsx("div",{children:" Notifications"}):a==="Users"?e.jsx(Oe,{}):a==="Categories"?e.jsx(Ge,{IdRetrival:C,setter:se,setResult:u}):a==="Add Movie"?e.jsx(Ke,{isLoading:L,setIsLoading:g,setResult:u,setLoadDiaplay:U}):a==="Movies List"?e.jsx(Je,{Handlegeneral:Q,setMoveIid:S,HandleUpdateMovie:R,HandleDeleteMovie:ae,setResult:u,setIsLoading:g,setLoadDiaplay:U}):a==="Dashboard"?e.jsx(xe,{}):e.jsx(xe,{}))},[a]),e.jsx(Re,{children:v?e.jsxs("div",{className:"flex lg:flex-row flex-col min-h-screen bg-main cursor-pointer relative py-3 px-5 gap-10 md:gap-8 lg:px-10 ",children:[e.jsx("div",{className:` ${I?"Animate":"hidden"} fixed Alert  left-0 w-full z-40 flex justify-center items-center `,children:e.jsx("div",{className:" bg-text text-dry w-1/2 rounded-md border-[3px] border-subMain flex justify-center items-center p-4",children:I&&e.jsx("p",{children:I})})}),e.jsx("div",{className:`${L?"":"hidden"} absolute top-0 left-0 w-full h-full flex justify-center  bg-modal z-40`,children:L&&e.jsxs("div",{className:" fixed top-[200px] h-24 w-1/2 rounded-md border-border text-white  flex flex-col justify-center items-center ",children:[e.jsx(Pe,{className:"h-10 w-10 animate-spin"}),e.jsx("p",{className:"font-semibold",children:$}),e.jsx("p",{className:"font-semibold",children:"this will take about two minutes"})]})}),e.jsxs("div",{className:`absolute top-0 left-0 w-full ${o?"":"hidden"}  z-20 h-full bg-modal flex flex-col justify-start items-center gap-5  p-4 `,children:[e.jsx("div",{className:"flex justify-end items-center w-full md:w-1/2 ",children:e.jsx("span",{onClick:()=>f(s=>!s),className:"rounded-full border-2 border-subMain hover:text-subMain text-white transi hover:border-white hover:rotate-180 ",children:e.jsx(Ve,{className:"h-12 w-12"})})}),e.jsx("div",{className:" w-full md:w-1/2  rounded-lg border border-border flexCol  gap-10 p-6 bg-dry",children:m==="Add"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold ",children:"Create Category"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),d("Add"),f(i=>!i),q()},className:"flex flex-col gap-6 text-left",action:"",children:[e.jsx(c,{label:"Category Name",placeholder:"Add category name",type:"text",setter:W,mainVal:V,setInputVal:N,indicator:"Category Name",lablFor:"tittle"}),e.jsxs("button",{type:"submit",className:"w-full font-semibold  flexRow py-3 rounded border-2 gap-3 Oga cursor-pointer transi border-subMain bg-subMain text-white hover:bg-main",children:[e.jsx(B,{className:"pikin h-7 w-7"})," Add"]})]})]}):m==="Edit"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold ",children:"Update Category"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),d("Edit"),f(i=>!i),console.log(m),le()},className:"flex flex-col gap-6 text-left",action:"",children:[e.jsx(c,{label:"Category Name",placeholder:`${w}`,mainVal:z,setInputVal:N,setter:X,type:"text",indicator:"Category Name",lablFor:"tittle"}),e.jsxs("button",{className:"w-full font-semibold transi Oga  flexRow py-3 rounded border-2 gap-3 cursor-pointer transi border-subMain bg-subMain text-white hover:bg-main",children:[e.jsx(ge,{className:"pikin"})," Update"]})]})]}):m==="TableEdit"?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold ",children:"Update Movie"}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),d("Edit"),f(i=>!i),console.log(m),R()},className:"flex flex-col gap-6 text-left",action:"",children:[e.jsx(c,{label:"Movie Name",placeholder:`${w}`,mainVal:A,setInputVal:N,setter:P,type:"text",indicator:"Category Name",lablFor:"tittle"}),e.jsxs("button",{onClick:()=>R(),className:"w-full font-semibold transi Oga  flexRow py-3 rounded border-2 gap-3 cursor-pointer transi border-subMain bg-subMain text-white hover:bg-main",children:[e.jsx(ge,{className:"pikin"})," Update"]})]})]}):e.jsx("p",{children:console.log("No current modal")})})]}),e.jsx("div",{className:" w-full lg:w-[25%] relative rounded-md ",children:e.jsx(He,{})}),e.jsx("div",{className:" w-full lg:w-[75%] bg-dry  rounded-md border border-gray-800 rightbar p-4",children:p})]}):e.jsx(qe,{})})};export{lt as default};
