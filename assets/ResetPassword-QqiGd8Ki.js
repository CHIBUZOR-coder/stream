import{r as s,M as p,u as v,v as P,j as e,f as N,n as C,I as g}from"./index-B1U6WZZ4.js";const I=()=>{const{setInputVal:u}=s.useContext(p),[l,m]=s.useState(""),[r,f]=s.useState(""),[t,n]=s.useState(),[w,h]=s.useState(""),j=v(),{issLoading:x,setIsLoading:i,Alert:d,GetUser:S}=s.useContext(p),{token:b}=P(),y=async c=>{c.preventDefault(),i(!0),h("Updating  password...");try{const a=await fetch(`http://localhost:5000/resetPassword/${b}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({newPassword:r,confirmPassword:l})}),o=await a.json();a.ok?(n(d(!0,o.message)),i(!1)):(i(!1),n(d(!1,o.message)),console.log(o)),console.log(o),o.success===!0&&(localStorage.setItem("IsLogin",!0),setTimeout(()=>{j("/stream/login")},3200)),f(""),m("")}catch(a){console.log(a.message),n(d(!1,a.message))}finally{setTimeout(()=>{n(null)},3e3)}};return s.useEffect(()=>{console.log("pass",r),console.log("Confirmpass",l)},[r,l]),s.useEffect(()=>{console.log("result:",t)},[t]),e.jsx(N,{children:e.jsxs("div",{className:"mx-auto relative px-6 pb-4   flexCol ",children:[e.jsx("div",{className:` ${t?"Animate":"hidden"} fixed Alert  left-0 w-full z-40 flex justify-center items-center `,children:e.jsx("div",{className:" bg-text text-dry w-1/2 rounded-md border-[3px] border-subMain flex justify-center items-center p-4",children:t&&e.jsx("p",{children:t})})}),e.jsx("div",{className:`${x?"":"hidden"} absolute top-0 left-0 w-full h-full flex justify-center  bg-modal z-40`,children:x&&e.jsxs("div",{className:" fixed top-[200px] h-24 w-1/2 rounded-md border-border text-white  flex flex-col justify-center items-center ",children:[e.jsx(C,{className:"h-10 w-10 animate-spin"}),e.jsx("p",{className:"font-semibold",children:w})]})}),e.jsxs("div",{className:"p-6 md:p-4 md:w-[70%]  lg:w-[40%] bg-dry  rounded-lg flexCol justify-center items-center border-2 border-border my-auto md:my-9 ",children:[e.jsx("div",{className:"rounded-full   login_logo",children:e.jsx("img",{src:"https://res.cloudinary.com/dtjgj2odu/image/upload/v1739151976/logoround_awixqx.png",alt:"logo",className:" w-36 h-36 object-contain"})}),e.jsxs("form",{onSubmit:c=>{y(c)},className:"flex flexCol gap-5 w-full ",children:[e.jsx(g,{label:"Password",placeholder:"********",type:"password",setter:f,setInputVal:u,mainVal:r,bg:!0,indicator:"password"}),e.jsx(g,{label:"confirmPassword",placeholder:"Streamview@gmail.com",type:"password",setter:m,setInputVal:u,mainVal:l,bg:!0,indicator:"ConfirmPassword"}),e.jsx("button",{className:"bg-subMain transi hover:bg-main flexRow gap-4 text-white p-4 rounded-lg w-full ",children:"Reset Password"})]})]})]})})};export{I as default};
