import{r as s,M as f,N,j as e,g as v,O as L,Q as p,T as S,L as C}from"./index-xqLIUCAm.js";const I=()=>{const{setInputVal:m}=s.useContext(f),[l,u]=s.useState(""),[o,x]=s.useState(""),[n,i]=s.useState(),[h,j]=s.useState(""),b=N(),{issLoading:g,setIsLoading:r,Alert:d,setIslogin:y}=s.useContext(f),w=async c=>{c.preventDefault(),r(!0),j("Logging in...");try{const a=await fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:l,password:o})}),t=await a.json();a.ok||(r(!1),i(d(!1,t.message)),console.log(t)),r(!1),i(d(!0,t.message)),console.log(t),localStorage.setItem("UserInfo",JSON.stringify(t)),t.success===!0&&(y(!0),setTimeout(()=>{b("/stream/")},100)),u(""),x("")}catch(a){console.log(a.message),i(d(!1,a.message))}finally{setTimeout(()=>{i(null)},2e3)}};return s.useEffect(()=>{console.log("email",l)},[l]),s.useEffect(()=>{console.log("pass",o)},[o]),e.jsx(v,{children:e.jsxs("div",{className:"mx-auto relative px-6  md:my-20 flexCol ",children:[e.jsx("div",{className:` ${n?"Animate":"hidden"} fixed Alert  left-0 w-full z-40 flex justify-center items-center `,children:e.jsx("div",{className:" bg-text text-dry w-1/2 rounded-md border-[3px] border-subMain flex justify-center items-center p-4",children:n&&e.jsx("p",{children:n})})}),e.jsx("div",{className:`${g?"":"hidden"} absolute top-0 left-0 w-full h-full flex justify-center  bg-modal z-40`,children:g&&e.jsxs("div",{className:" fixed top-[200px] h-24 w-1/2 rounded-md border-border text-white  flex flex-col justify-center items-center ",children:[e.jsx(L,{className:"h-10 w-10 animate-spin"}),e.jsx("p",{className:"font-semibold",children:h})]})}),e.jsxs("div",{className:"p-6 md:p-4 md:w-[70%]  lg:w-[40%] bg-dry  rounded-lg flexCol justify-center items-center border-2 border-border  ",children:[e.jsx("div",{className:"rounded-full   login_logo",children:e.jsx("img",{src:"https://res.cloudinary.com/dtjgj2odu/image/upload/v1734517937/StreamLogo_ao5f75.png",alt:"logo",className:" w-28 h-28 object-contain"})}),e.jsxs("form",{className:"flex flexCol gap-5 w-full",children:[e.jsx(p,{label:"Email",placeholder:"Streamview@gmail.com",type:"email",setter:u,setInputVal:m,mainVal:l,bg:!0,indicator:"Email"}),e.jsx(p,{label:"Password",placeholder:"********",type:"password",setter:x,setInputVal:m,mainVal:o,bg:!0,indicator:"password"}),e.jsxs("button",{onClick:c=>w(c),className:"bg-subMain transi hover:bg-main flexRow gap-4 text-white p-4 rounded-lg w-full ",children:[e.jsx(S,{})," Login"]}),e.jsxs("p",{className:"text-center text-border",children:["Don't have an account?",e.jsxs(C,{to:"/stream/register",className:"text-dryGray transi hover:text-subMain font-semibold",children:[" ","Signup"]})]})]})]})]})})};export{I as default};
