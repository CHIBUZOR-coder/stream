import{r as s,M as m,u as h,j as e,g as j,n as y,I as b,o as v}from"./index-zsPyl9T-.js";const N=()=>{const{setInputVal:x}=s.useContext(m),[a,d]=s.useState(""),[t,o]=s.useState(),[f,g]=s.useState("");h();const{issLoading:u,setIsLoading:i,Alert:r}=s.useContext(m),p=async c=>{c.preventDefault(),i(!0),g("Sending recovery link to your mail...");try{const l=await fetch("http://localhost:5000/accountRecovery",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:a})}),n=await l.json();l.ok?(o(r(!0,n.message)),i(!1)):(i(!1),o(r(!1,n.message)),console.log(n)),console.log(n),d("")}catch(l){console.log(l.message),o(r(!1,l.message))}finally{setTimeout(()=>{o(null)},4e3)}};return s.useEffect(()=>{console.log("email",a)},[a]),s.useEffect(()=>{console.log("result:",t)},[t]),e.jsx(j,{children:e.jsxs("div",{className:"mx-auto relative px-6 pb-4   flexCol ",children:[e.jsx("div",{className:` ${t?"Animate":"hidden"} fixed Alert  left-0 w-full z-40 flex justify-center items-center `,children:e.jsx("div",{className:" bg-text text-dry w-1/2 rounded-md border-[3px] border-subMain flex justify-center items-center p-4",children:t&&e.jsx("p",{children:t})})}),e.jsx("div",{className:`${u?"":"hidden"} absolute top-0 left-0 w-full h-full flex justify-center  bg-modal z-40`,children:u&&e.jsxs("div",{className:" fixed top-[200px] h-24 w-1/2 rounded-md border-border text-white  flex flex-col justify-center items-center ",children:[e.jsx(y,{className:"h-10 w-10 animate-spin"}),e.jsx("p",{className:"font-semibold",children:f})]})}),e.jsxs("div",{className:"p-6 md:p-4 md:w-[70%]  lg:w-[40%] bg-dry  rounded-lg flexCol justify-center items-center border-2 border-border my-auto md:my-9 ",children:[e.jsx("div",{className:"rounded-full   login_logo",children:e.jsx("img",{src:"https://res.cloudinary.com/dtjgj2odu/image/upload/v1739151976/logoround_awixqx.png",alt:"logo",className:" w-36 h-36 object-contain"})}),e.jsxs("form",{onSubmit:c=>{p(c)},className:"flex flexCol gap-5 w-full ",children:[e.jsx(b,{label:"Email",placeholder:"Streamview@gmail.com",type:"email",setter:d,setInputVal:x,mainVal:a,bg:!0,indicator:"Email_Recovery:"}),e.jsxs("button",{className:"bg-subMain transi hover:bg-main flexRow gap-4 text-white p-4 rounded-lg w-full ",children:[e.jsx(v,{})," Login"]})]})]})]})})};export{N as default};
