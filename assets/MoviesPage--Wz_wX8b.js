import{R as N,r as o,M as y,j as e,k as C,l as M,C as k,L as w,F as S}from"./index-DYCC1sCr.js";import{L as $}from"./Layout-QAh9hDuz.js";const D=N.memo(({Movies:h})=>{const{setSelectedItems:x,selectedItems:c,RatesData:l,TimesData:p,YearData:r,HandleGetSelected:b,userChoice:f}=o.useContext(y),[n,u]=o.useState(null),[s,a]=o.useState(!1),d=[{id:1,items:k},{id:2,items:r},{id:3,items:p},{id:4,items:l}];o.useEffect(()=>{console.log("flter",f)},[f]);const m=t=>{n===t?(u(null),a(!1)):(u(t),a(!0))},v=(t,g)=>{x(i=>({...i,[t]:g})),b(t,g)};return e.jsx("div",{className:"my-6 bg-dry border text-dryGray border-gray-800 grid md:grid-cols-4 grid-cols-2 lg:gap-12 gap-2 rounded p-6",children:d.map(t=>{var g;return e.jsxs("div",{onClick:()=>m(t.id),children:[e.jsxs("div",{className:"relative w-full flex items-center cursor-pointer border-gray-800 text-white px-4 py-2 text-left bg-main rounded-lg focus:outline-none focus:ring-1 focus:border-dry",children:[e.jsx("span",{className:"block font-semibold text-[0.7rem] filterr md:text-[1rem] ",children:c[t.id]?(g=t.items.find(i=>i.id===c[t.id]))==null?void 0:g.tittle:t.items[0].name}),e.jsx("span",{className:"absolute right-2 flex items-center",children:e.jsx(C,{className:"h-5 w-5","aria-hidden":"true"})})]}),e.jsx("div",{className:`${n===t.id?`${s?"block":"hidden"}`:"hidden"} relative`,children:e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-drkb2 flex flex-col gap-2 pl-4 border border-gray-800 text-dryGray rounded-md shadow-lg max-h-60 py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm-text-sm",children:t.items.map((i,j)=>e.jsxs("div",{onClick:()=>{j!==0&&v(t.id,i.id)},className:`relative w-full flex justify-start items-center gap-2 hover:bg-white hover:text-dry transi py-1 cursor-pointer ${c[t.id]===i.id?"font-bold":""}`,children:[e.jsx("span",{children:c[t.id]===i.id&&j!==0&&e.jsx(M,{className:"h-4 w-4"})}),e.jsx("span",{className:"truncate font-semibold ",children:i.tittle})]},i.id))})})]},t.id)})})}),F=()=>{const{userChoice:h,Movies:x,AddToCart:c}=o.useContext(y),l=10,p=39,[r,b]=o.useState(0),f=()=>!h||Object.keys(h).length===0?x:x.filter(s=>{let a=!0;for(const[d,m]of Object.entries(h))(d==="1"&&s.category!==m||d==="2"&&s.approxiY!==m||d==="3"&&s.approxiT!==m||d==="4"&&s.approxiR!==m)&&(a=!1);return a}),n=f(),u=s=>{s==="next"?r+l<n.length&&(b(r+l),window.scrollTo({top:0,behavior:"smooth"})):s==="prev"?r-l>=0&&(b(r-l),window.scrollTo({top:0,behavior:"smooth"})):console.log("error")};return o.useEffect(()=>{console.log("page",r)},[r]),o.useEffect(()=>{console.log("filtered",n.length)},[f]),o.useEffect(()=>{console.log("max",l)},[l]),e.jsx($,{children:e.jsxs("div",{className:"px-2 my-6",children:[e.jsx(D,{Movies:x}),e.jsxs("p",{className:"text-lg font-medium my-6",children:["Total items found",e.jsxs("span",{className:"font-bold text-subMain rounded-lg",children:[" ",n.length]})]}),e.jsx("div",{id:"#top",className:"grid sm:mt-10 mt-6 xl:grid-cols-4 2xl:grid-cols-5 lg:grid-cols-3 sm:grid-cols-1 gap-6",children:n.slice(r,r+l).map((s,a)=>e.jsxs("div",{className:"border-2 border-border rounded bg-center bg-cover relative transi hover:scale-95 w-full flex flex-col ",children:[e.jsx(w,{to:`/stream/movie/${s.id}`,className:" h-64  bg-center bg-cover ",children:e.jsx("img",{src:`./images/${s.image}.jpg`,loading:"lazy",className:"w-full h-full object-cover",alt:""})}),e.jsxs("div",{className:"flex absolute bottom-0  justify-between items-center  bg-trans2 w-full text-white px-4 py-3",children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name}),e.jsx("button",{onClick:()=>c(s,s.price),className:"h-8 w-8 text-sm flexCol transi hover:bg-transparent border-subMain bg-subMain2 border-2 rounded-md text-white ",children:e.jsx(S,{})})]})]},`${s.id}`))}),e.jsxs("div",{className:" my-10 md:my-16 flex justify-center gap-5 items-center w-full",children:[e.jsx("span",{onClick:s=>u("prev"),className:` ${r>0?"bg-subMain":""} border-2 flex justify-center items-center gap-2 rounded-md cursor-pointer border-subMain py-3 px-8`,children:"prev"}),e.jsx("span",{onClick:s=>u("next"),className:` ${r<p?"bg-subMain":""} border-2 flex justify-center items-center gap-2 rounded-md cursor-pointer border-subMain py-3 px-8`,children:"next"})]})]})})};export{F as default};
